"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[48984],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=d(n),u=r,h=c["".concat(s,".").concat(u)]||c[u]||m[u]||l;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var d=2;d<l;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},13327:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return o},metadata:function(){return d},toc:function(){return m}});var a=n(83117),r=n(80102),l=(n(67294),n(3905)),i=["components"],o={title:"cdc (Source)"},s=void 0,d={unversionedId:"cep/reference/functions/source/cdc",id:"cep/reference/functions/source/cdc",title:"cdc (Source)",description:"The CDC source receives events when change events (i.e., INSERT, UPDATE,",source:"@site/docs/cep/reference/functions/source/cdc.md",sourceDirName:"cep/reference/functions/source",slug:"/cep/reference/functions/source/cdc",permalink:"/docs/cep/reference/functions/source/cdc",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/master/docs/cep/reference/functions/source/cdc.md",tags:[],version:"current",frontMatter:{title:"cdc (Source)"},sidebar:"tutorialSidebar",previous:{title:"xml (Sink Mapper)",permalink:"/docs/cep/reference/functions/sinkmapper/xml"},next:{title:"email (Source)",permalink:"/docs/cep/reference/functions/source/email"}},p={},m=[{value:"Query Parameters",id:"query-parameters",level:2},{value:"Example 1",id:"example-1",level:2},{value:"Example 2",id:"example-2",level:2},{value:"Example 3",id:"example-3",level:2},{value:"Example 4",id:"example-4",level:2},{value:"Example 5",id:"example-5",level:2},{value:"Example 6",id:"example-6",level:2},{value:"Example 7",id:"example-7",level:2},{value:"Example 8",id:"example-8",level:2}],c={toc:m};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"The CDC source receives events when change events (i.e., INSERT, UPDATE,\nDELETE) are triggered for a database table. Events are received in the\n",(0,l.kt)("inlineCode",{parentName:"p"},"key-value")," format. There are two modes you could perform\nCDC: Listening mode and Polling mode. In polling mode, the datasource is\nperiodically polled for capturing the changes. The polling period can be\nconfigured. In polling mode, you can only capture INSERT and UPDATE\nchanges. On listening mode, the Source will keep listening to the Change\nLog of the database and notify in case a change has taken place. Here,\nyou are immediately notified about the change, compared to polling mode.\nThe key values of the map of a CDC change event are as follows. For\n",(0,l.kt)("inlineCode",{parentName:"p"},"listening")," mode:     For insert: Keys are specified as columns of the\ntable.     For delete: Keys are followed by the specified table columns.\nThis is achieved via ",(0,l.kt)("inlineCode",{parentName:"p"},"before_"),". e.g., specifying ",(0,l.kt)("inlineCode",{parentName:"p"},"before_X"),"\nresults in the key being added before the column named ",(0,l.kt)("inlineCode",{parentName:"p"},"X"),".     For\nupdate: Keys are followed followed by the specified table columns. This\nis achieved via ",(0,l.kt)("inlineCode",{parentName:"p"},"before_"),". e.g., specifying ",(0,l.kt)("inlineCode",{parentName:"p"},"before_X")," results in\nthe key being added before the column named ",(0,l.kt)("inlineCode",{parentName:"p"},"X"),". For ",(0,l.kt)("inlineCode",{parentName:"p"},"polling")," mode:\nKeys are specified as the columns of the table.","#","#","#","#"," Preparations\nrequired for working with Oracle Databases in listening mode Using the\nextension in Windows, Mac OSX and AIX are pretty straight forward\ninorder to achieve the required behaviour please follow the steps given\nbelow   - Download the compatible version of oracle instantclient for\nthe database version from\n","[","here","]","(",(0,l.kt)("a",{parentName:"p",href:"https://www.oracle.com/database/technologies/instant-client/downloads.html"},"https://www.oracle.com/database/technologies/instant-client/downloads.html"),")\nand extract   - Extract and set the environment variable\n",(0,l.kt)("inlineCode",{parentName:"p"},"LD_LIBRARY_PATH")," to the location of instantclient which was exstracted\nas shown below   "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"    export LD_LIBRARY_PATH=<path to the instant client location>\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Inside the instantclient folder which was download there are two\njars ",(0,l.kt)("inlineCode",{parentName:"p"},"xstreams.jar")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"ojdbc<version>.jar")," convert them to OSGi\nbundles using the tools which were provided in the ",(0,l.kt)("inlineCode",{parentName:"p"},"<distribution>/bin"),"\nfor converting the ",(0,l.kt)("inlineCode",{parentName:"p"},"ojdbc.jar")," use the tool ",(0,l.kt)("inlineCode",{parentName:"p"},"spi-provider.sh|bat")," and\nfor the conversion of ",(0,l.kt)("inlineCode",{parentName:"p"},"xstreams.jar")," use the jni-provider.sh as shown\nbelow(Note: this way of converting Xstreams jar is applicable only for\nLinux environments for other OSs this step is not required and\nconverting it through the ",(0,l.kt)("inlineCode",{parentName:"p"},"jartobundle.sh")," tool is enough)   "),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre"},"    ./jni-provider.sh <input-jar> <destination> <comma seperated native library names>\n")))),(0,l.kt)("p",null,"  once ojdbc and xstreams jars are converted to OSGi copy the generated\njars to the ",(0,l.kt)("inlineCode",{parentName:"p"},"<distribution>/lib"),". Currently streamprocessor-io-cdc only supports\nthe oracle database distributions 12 and above See parameter: mode for\nsupported databases and change events."),(0,l.kt)("p",null,"Syntax"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'CREATE SOURCE <NAME> WITH (type="cdc", map.type="<STRING>", url="<STRING>", mode="<STRING>", jdbc.driver.name="<STRING>", username="<STRING>", password="<STRING>", pool.properties="<STRING>", datasource.name="<STRING>", table.name="<STRING>", polling.column="<STRING>", polling.interval="<INT>", operation="<STRING>", connector.properties="<STRING>", database.server.id="<STRING>", database.server.name="<STRING>", wait.on.missed.record="<BOOL>", missed.record.waiting.timeout="<INT>") \n')),(0,l.kt)("h2",{id:"query-parameters"},"Query Parameters"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Default Value"),(0,l.kt)("th",{parentName:"tr",align:null},"Possible Data Types"),(0,l.kt)("th",{parentName:"tr",align:null},"Optional"),(0,l.kt)("th",{parentName:"tr",align:null},"Dynamic"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"url"),(0,l.kt)("td",{parentName:"tr",align:null},"The connection URL to the database. F=The format used is: ",(0,l.kt)("inlineCode",{parentName:"td"},"jdbc:mysql://<host>:<port>/<database_name>")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"mode"),(0,l.kt)("td",{parentName:"tr",align:null},"Mode to capture the change data. The type of events that can be received, and the required parameters differ based on the mode. The mode can be one of the following: ",(0,l.kt)("inlineCode",{parentName:"td"},"polling"),": This mode uses a column named ",(0,l.kt)("inlineCode",{parentName:"td"},"polling.column")," to monitor the given table. It captures change events of the ",(0,l.kt)("inlineCode",{parentName:"td"},"RDBMS"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"INSERT"),", and ",(0,l.kt)("inlineCode",{parentName:"td"},"UPDATE")," types. ",(0,l.kt)("inlineCode",{parentName:"td"},"listening"),": This mode uses logs to monitor the given table. It currently supports change events only of the ",(0,l.kt)("inlineCode",{parentName:"td"},"MySQL"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"INSERT"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"UPDATE"),", and ",(0,l.kt)("inlineCode",{parentName:"td"},"DELETE")," types."),(0,l.kt)("td",{parentName:"tr",align:null},"listening"),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"jdbc.driver.name"),(0,l.kt)("td",{parentName:"tr",align:null},"The SDK class name for connecting the database. ",(0,l.kt)("strong",{parentName:"td"},"It is required to specify a value for this parameter when the mode is ",(0,l.kt)("inlineCode",{parentName:"strong"},"polling"),".")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"username"),(0,l.kt)("td",{parentName:"tr",align:null},"The username to be used for accessing the database. This user needs to have the ",(0,l.kt)("inlineCode",{parentName:"td"},"SELECT"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"RELOAD"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"SHOW DATABASES"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"REPLICATION SLAVE"),", and ",(0,l.kt)("inlineCode",{parentName:"td"},"REPLICATION CLIENT"),"privileges for the change data capturing table (specified via the ",(0,l.kt)("inlineCode",{parentName:"td"},"table.name")," parameter). To operate in the polling mode, the user needs ",(0,l.kt)("inlineCode",{parentName:"td"},"SELECT")," privileges."),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"password"),(0,l.kt)("td",{parentName:"tr",align:null},"The password of the username you specified for accessing the database."),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pool.properties"),(0,l.kt)("td",{parentName:"tr",align:null},"The pool parameters for the database connection can be specified as key-value pairs."),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"datasource.name"),(0,l.kt)("td",{parentName:"tr",align:null},"Name of the gdn datasource to connect to the database. When datasource name is provided, the URL, username and password are not needed. A datasource based connection is given more priority over the URL based connection.  This parameter is applicable only when the mode is set to ",(0,l.kt)("inlineCode",{parentName:"td"},"polling"),", and it can be applied only when you use this extension with gdn Stream Processor."),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"table.name"),(0,l.kt)("td",{parentName:"tr",align:null},"The name of the table that needs to be monitored for data changes."),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"polling.column"),(0,l.kt)("td",{parentName:"tr",align:null},"The column name that is polled to capture the change data. It is recommended to have a TIMESTAMP field as the ",(0,l.kt)("inlineCode",{parentName:"td"},"polling.column")," in order to capture the inserts and updates. Numeric auto-incremental fields and char fields can also be used as ",(0,l.kt)("inlineCode",{parentName:"td"},"polling.column"),". However, note that fields of these types only support insert change capturing, and the possibility of using a char field also depends on how the data is input. ",(0,l.kt)("strong",{parentName:"td"},"It is required to enter a value for this parameter only when the mode is ",(0,l.kt)("inlineCode",{parentName:"strong"},"polling"),".")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"polling.interval"),(0,l.kt)("td",{parentName:"tr",align:null},"The time interval (specified in seconds) to poll the given table for changes. This parameter is applicable only when the mode is set to ",(0,l.kt)("inlineCode",{parentName:"td"},"polling"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"operation"),(0,l.kt)("td",{parentName:"tr",align:null},"The change event operation you want to carry out. Possible values are ",(0,l.kt)("inlineCode",{parentName:"td"},"insert"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"update")," or ",(0,l.kt)("inlineCode",{parentName:"td"},"delete"),". This parameter is not case sensitive. ",(0,l.kt)("strong",{parentName:"td"},"It is required to specify a value only when the mode is ",(0,l.kt)("inlineCode",{parentName:"strong"},"listening"),".")),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"No"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"connector.properties"),(0,l.kt)("td",{parentName:"tr",align:null},"Here, you can specify Debezium connector properties as a comma-separated string. The properties specified here are given more priority over the parameters. This parameter is applicable only for the ",(0,l.kt)("inlineCode",{parentName:"td"},"listening")," mode."),(0,l.kt)("td",{parentName:"tr",align:null},"Empty","_","String"),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"database.server.id"),(0,l.kt)("td",{parentName:"tr",align:null},"An ID to be used when joining MySQL database cluster to read the bin log. This should be a unique integer between 1 to 2\\^32. This parameter is applicable only when the mode is ",(0,l.kt)("inlineCode",{parentName:"td"},"listening"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"Random integer between 5400 and 6400"),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"database.server.name"),(0,l.kt)("td",{parentName:"tr",align:null},"A logical name that identifies and provides a namespace for the database server. This parameter is applicable only when the mode is ",(0,l.kt)("inlineCode",{parentName:"td"},"listening"),"."),(0,l.kt)("td",{parentName:"tr",align:null},"{host}","_","{port}"),(0,l.kt)("td",{parentName:"tr",align:null},"STRING"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"wait.on.missed.record"),(0,l.kt)("td",{parentName:"tr",align:null},"Indicates whether the process needs to wait on missing/out-of-order records. When this flag is set to ",(0,l.kt)("inlineCode",{parentName:"td"},"true")," the process will be held once it identifies a missing record. The missing recrod is identified by the sequence of the polling.column value. This can be used only with number fields and not recommended to use with time values as it will not be sequential. This should be enabled ONLY where the records can be written out-of-order, (eg. concurrent writers) as this degrades the performance."),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"BOOL"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"missed.record.waiting.timeout"),(0,l.kt)("td",{parentName:"tr",align:null},"The timeout (specified in seconds) to retry for missing/out-of-order record. This should be used along with the wait.on.missed.record parameter. If the parameter is not set, the process will indefinitely wait for the missing record."),(0,l.kt)("td",{parentName:"tr",align:null},"-1"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null},"Yes"),(0,l.kt)("td",{parentName:"tr",align:null},"No")))),(0,l.kt)("h2",{id:"example-1"},"Example 1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CREATE SOURCE inputStream WITH (type = 'cdc' , url = 'jdbc:mysql://localhost:3306/SimpleDB', username = 'cdcuser', password = 'pswd4cdc', table.name = 'students', operation = 'insert',\nmap.type='keyvalue', map.attributes=\"id='id', name='name'\") (id string, name string);\n")),(0,l.kt)("p",null,"In this example, the CDC source listens to the row insertions that are\nmade in the ",(0,l.kt)("inlineCode",{parentName:"p"},"students")," table with the column name, and the ID. This\ntable belongs to the ",(0,l.kt)("inlineCode",{parentName:"p"},"SimpleDB")," MySQL database that can be accessed\nvia the given URL."),(0,l.kt)("h2",{id:"example-2"},"Example 2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CREATE SOURCE inputStream WITH (type = 'cdc' , url = 'jdbc:mysql://localhost:3306/SimpleDB', username = 'cdcuser', password = 'pswd4cdc', table.name = 'students', operation = 'update',\nmap.type='keyvalue', map.attributes=\"id='id', name='name', before_id='before_id', before_name='before_name'\") (before_id string, id string, before_name string , name string);\n")),(0,l.kt)("p",null,"In this example, the CDC source listens to the row updates that are made\nin the ",(0,l.kt)("inlineCode",{parentName:"p"},"students")," table. This table belongs to the ",(0,l.kt)("inlineCode",{parentName:"p"},"SimpleDB")," MySQL\ndatabase that can be accessed via the given URL."),(0,l.kt)("h2",{id:"example-3"},"Example 3"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CREATE SOURCE inputStream WITH (type = 'cdc' , url = 'jdbc:mysql://localhost:3306/SimpleDB', username = 'cdcuser', password = 'pswd4cdc', table.name = 'students', operation = 'delete',\nmap.type='keyvalue', map.attributes=\"before_id='before_id', before_name='before_name'\") (before_id string, before_name string);\n")),(0,l.kt)("p",null,"In this example, the CDC source listens to the row deletions made in the\n",(0,l.kt)("inlineCode",{parentName:"p"},"students")," table. This table belongs to the ",(0,l.kt)("inlineCode",{parentName:"p"},"SimpleDB")," database that\ncan be accessed via the given URL."),(0,l.kt)("h2",{id:"example-4"},"Example 4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CREATE SOURCE inputStream WITH (type = 'cdc', mode='polling', polling.column = 'id', jdbc.driver.name = 'com.mysql.jdbc.Driver', url = 'jdbc:mysql://localhost:3306/SimpleDB', username = 'cdcuser', password = 'pswd4cdc', table.name = 'students', map.type='keyvalue', map.attributes=\"id='id', name='name'\") (id int, name string);\n")),(0,l.kt)("p",null,"In this example, the CDC source polls the ",(0,l.kt)("inlineCode",{parentName:"p"},"students")," table for\ninserts. ",(0,l.kt)("inlineCode",{parentName:"p"},"id")," that is specified as the polling column is an auto\nincremental field. The connection to the database is made via the URL,\nusername, password, and the JDBC SDK name."),(0,l.kt)("h2",{id:"example-5"},"Example 5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CREATE SOURCE inputStream WITH (type = 'cdc', mode='polling', polling.column = 'id', datasource.name = 'SimpleDB', table.name = 'students', map.type='keyvalue', map.attributes=\"id='id', name='name'\") (id int, name string);\n")),(0,l.kt)("p",null,"In this example, the CDC source polls the ",(0,l.kt)("inlineCode",{parentName:"p"},"students")," table for\ninserts. The given polling column is a char column with the ",(0,l.kt)("inlineCode",{parentName:"p"},"S001,\nS002, ... .")," pattern. The connection to the database is made via a\ndata source named ",(0,l.kt)("inlineCode",{parentName:"p"},"SimpleDB"),". Note that the ",(0,l.kt)("inlineCode",{parentName:"p"},"datasource.name"),"\nparameter works only with the Stream Processor."),(0,l.kt)("h2",{id:"example-6"},"Example 6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CREATE SOURCE inputStream WITH (type = 'cdc', mode='polling', polling.column = 'last_updated', datasource.name = 'SimpleDB', table.name = 'students', map.type='keyvalue') (name string);\n")),(0,l.kt)("p",null,"In this example, the CDC source polls the ",(0,l.kt)("inlineCode",{parentName:"p"},"students")," table for inserts\nand updates. The polling column is a timestamp field."),(0,l.kt)("h2",{id:"example-7"},"Example 7"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CREATE SOURCE inputStream WITH (type='cdc', jdbc.driver.name='com.mysql.jdbc.Driver', url='jdbc:mysql://localhost:3306/SimpleDB', username='cdcuser', password='pswd4cdc', table.name='students', mode='polling', polling.column='id', operation='insert', wait.on.missed.record='true', missed.record.waiting.timeout='10', map.type='keyvalue', map.attributes=\"batch_no='batch_no', item='item', qty='qty'\") (id int, name string);\n")),(0,l.kt)("p",null,"In this example, the CDC source polls the ",(0,l.kt)("inlineCode",{parentName:"p"},"students")," table for\ninserts. The polling column is a numeric field. This source expects the\nrecords in the database to be written concurrently/out-of-order so it\nwaits if it encounters a missing record. If the record doesn't appear\nwithin 10 seconds it resumes the process."),(0,l.kt)("h2",{id:"example-8"},"Example 8"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"CREATE SOURCE insertSweetProductionStream WITH (type = 'cdc', url = 'jdbc:oracle:thin://localhost:1521/ORCLCDB', username='c##xstrm', password='xs', table.name='DEBEZIUM.sweetproductiontable', operation = 'insert', connector.properties='oracle.outserver.name=DBZXOUT,oracle.pdb=ORCLPDB1' map.type='keyvalue') (ID int, NAME string, WEIGHT int);\n")),(0,l.kt)("p",null,"In this example, the CDC source connect to an Oracle database and\nlistens for insert queries of sweetproduction table"))}u.isMDXComponent=!0}}]);